import{u as o,r,j as e}from"./index-DeJVmANz.js";/* empty css                 *//* empty css                        */import{f as l}from"./apiFetching-D9uxTKnH.js";import{a as h,d as u}from"./prefilled-data-Cf8CPL9T.js";function x({props:n}){const t=o(),[a,i]=r.useState({});r.useLayoutEffect(()=>{i(s=>({...s,...n}))},[n]);const d=()=>{l("POST","api/v1/request/request-status",{reqID:a.reference_id}).then(s=>{s?i(c=>({...c,...s.data})):alert("cannot reterive some value")}).catch(()=>{localStorage.setItem("userLogged",!1),t("/login")})},p={0:"Finding Donor",1:"Donor Accepted",2:"No donor found",3:"Donation Done"};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"request-details-container-card card",children:[e.jsxs("div",{className:"request-details-container-card-heading",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Date : ",a.request_date," "]}),e.jsxs("p",{children:["Time : ",a.request_time]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Status : ",p[a.status]]}),e.jsx("p",{onClick:()=>d(),className:"view-data",children:"View"})]})]}),a.recipient_data&&e.jsxs("div",{className:"request-details-container-card-info card-inset",children:[e.jsxs("div",{className:"basic-info-request-details-card-info",children:[e.jsxs("div",{className:"data-request-details",children:[a.recipient_data.patient_name&&e.jsx("div",{children:e.jsxs("p",{children:["Patient Name : ",e.jsx("span",{children:a.recipient_data.patient_name})]})}),a.recipient_data.blood_group&&e.jsx("div",{children:e.jsxs("p",{children:["Blood Group : ",e.jsx("span",{children:h[a.recipient_data.blood_group]})]})}),a.recipient_data.gender&&e.jsx("div",{children:e.jsxs("p",{children:["Gender : ",e.jsx("span",{children:a.recipient_data.gender})]})}),a.recipient_data.age&&e.jsx("div",{children:e.jsxs("p",{children:["Age : ",e.jsx("span",{children:a.recipient_data.age})]})})]}),e.jsxs("div",{className:"data-request-details",children:[a.recipient_data.country&&a.recipient_data.landmark&&a.recipient_data.pincode&&e.jsxs("div",{children:[e.jsx("p",{children:"Address :"}),e.jsx("p",{children:`${a.recipient_data.landmark}, ${a.recipient_data.pincode}, ${a.recipient_data.country}`})]}),a.recipient_data.relation&&e.jsxs("div",{children:[e.jsx("p",{children:"Relation :"}),e.jsx("p",{children:u[a.recipient_data.relation]})]})]})]}),a.donorAccepted.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"donor-accepted-heading",children:"Donor List :"}),e.jsx("p",{className:"donor-accepted-note",children:"Make sure to express your gratitude with a thank-you message."})]}),a.donorAccepted.length===0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"donor-accepted-heading",children:"Donor List :"}),e.jsx("p",{className:"donor-accepted-note",children:"No donors accepted, we are searching..."})]}),e.jsx("div",{className:"donor-list-container",children:a.donorAccepted&&a.donorAccepted.map((s,c)=>e.jsxs("div",{className:"donor-list",children:[s.email_id&&e.jsxs("p",{children:["Email : ",s.email_id]}),s.phone_number&&e.jsxs("p",{children:["Phone : ",s.phone_number]}),s.donor_name&&e.jsxs("p",{children:["Name : ",s.donor_name]})]},c))})]})]})})}function f(){const n=o(),[t,a]=r.useState(null);return r.useEffect(()=>{l("GET","api/v1/general/user").then(i=>{i?a(()=>i.data.donor_request):(localStorage.setItem("userLogged",!1),n("/login"))}).catch(()=>{localStorage.setItem("userLogged",!1),n("/login")})},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"all-requests",children:[e.jsx("h3",{className:"all-requests-heading",children:"Request History : "}),e.jsx("br",{}),!t&&e.jsx("p",{children:"Fetching History ..."}),t&&t.length===0&&e.jsx("p",{children:"No request found."}),t&&t.length!==0&&t.map((i,d)=>e.jsx(x,{props:i},d))]})})}export{f as default};
