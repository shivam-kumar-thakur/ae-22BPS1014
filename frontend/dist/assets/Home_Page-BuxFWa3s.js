import{u as r,j as e,r as t}from"./index-DeJVmANz.js";/* empty css                 *//* empty css                 *//* empty css                 */import{f as c}from"./apiFetching-D9uxTKnH.js";import{f as h}from"./currentDateTime-CphJXtmz.js";import{P as x}from"./index-B0pkD8hY.js";function j(){const a=r(),n=()=>{t.startTransition(()=>a("/relative"))},i=()=>{t.startTransition(()=>a("/myself"))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"myRequestContainer card",children:[e.jsxs("div",{className:"content-ask-for-blood",children:[e.jsx("h3",{children:"Ask for Blood"}),e.jsx("br",{}),e.jsx("p",{className:"p1",children:"Bridge to Donors: Discover Support for Yourself or Loved Ones. Start your search"})]}),e.jsxs("div",{className:"nav-button-ask-blood",children:[e.jsx("button",{className:"button-2 p1",onClick:n,children:"Relative"}),e.jsx("button",{className:"button-2 p1",onClick:i,children:"For me"})]})]})})}function g(){const a=r(),n=()=>{t.startTransition(()=>a("/requests"))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"myRequestContainer card",children:[e.jsxs("div",{className:"content-myrequest",children:[e.jsx("h3",{children:"My requests"}),e.jsx("br",{}),e.jsx("p",{className:"p1",children:"Track Your Active and Past Requests, and Identify Potential and Previous Donors."})]}),e.jsx("div",{className:"nav-button-myrequest",children:e.jsx("button",{className:"button-1 p1 primary-color2",onClick:n,children:"Show All"})})]})})}function d({props:a,email:n}){const i=r(),[s,o]=t.useState(null),[m,l]=t.useState(null);t.useEffect(()=>{o(()=>a),s.recipient_gender==="MALE"?l(()=>"image/male.webp"):s.recipient_gender==="FEMALE"?l(()=>"image/female.webp"):l(()=>"image/other.webp")},[]);const u=()=>{c("POST","api/v1/request/accept-request",{reqID:a.request_id,accept_date_time:h()}).then(p=>{p?alert("successfully notified. You can see status in donation history"):(localStorage.setItem("userLogged",!1),i("/login"))}).catch(()=>{localStorage.setItem("userLogged",!1),i("/login")})};return e.jsx(e.Fragment,{children:s&&e.jsxs("div",{className:"person-details-container card",children:[e.jsxs("div",{className:"header-person-details",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:m,className:"person-image"})}),e.jsx("h3",{className:"",children:s.recipient_name})]}),e.jsxs("div",{className:"middle-person-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Age : "}),s.recipient_age," years"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Gender : "}),s.recipient_gender]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Blood Group : "}),s.recipient_blood_group]}),e.jsx("p",{children:e.jsx("strong",{children:"Location : "})}),e.jsx("p",{children:`${s.recipient_location.landmark}, ${s.recipient_location.pincode}, ${s.recipient_location.country}`}),e.jsx("p",{className:"imp-note-person-details",children:"Once they accept, they will be able to view your number and reach out to you."})]}),e.jsx("div",{className:"footer-person-details",children:e.jsx("button",{className:"button-3",onClick:()=>u(),children:"Donate"})})]})})}function v(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"person-details-container card",children:[e.jsxs("div",{className:"header-person-details",children:[e.jsx("div",{className:"image-container",children:e.jsx("img",{src:"image/logo-blue.png",className:"person-image"})}),e.jsx("h3",{className:"",children:"No Data"})]}),e.jsxs("div",{className:"middle-person-details",children:[e.jsx("p",{className:"imp-note-person-details",children:"When your relatives need any help we will inform you."}),e.jsx("p",{className:"imp-note-person-details",children:"We are happy to see you helping others."})]})]})})}d.propTypes={request_id:x.string};function f(){const a=r(),n=()=>{t.startTransition(()=>a("/donation-history"))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"myRequestContainer card",children:[e.jsxs("div",{className:"content-myrequest",children:[e.jsx("h3",{children:"My Donations"}),e.jsx("br",{}),e.jsx("p",{className:"p1",children:"View all your past donations."})]}),e.jsx("div",{className:"nav-button-myrequest",children:e.jsx("button",{className:"button-1 p1 primary-color2",onClick:n,children:"Show All"})})]})})}function w(){const a=r(),[n,i]=t.useState(null);return t.useEffect(()=>{c("GET","api/v1/general/user").then(s=>{s?s.data.recipient_requesting&&s.data.recipient_requesting.length!==0?i(()=>s.data):i(()=>null):(localStorage.setItem("userLogged",!1),a("/login"))}).catch(()=>{localStorage.setItem("userLogged",!1),a("/login")})},[a]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"home-page-container",children:[e.jsxs("div",{className:"primary-option",children:[e.jsx(j,{}),e.jsx(g,{}),e.jsx(f,{})]}),e.jsxs("div",{className:"donate-now",children:[e.jsx("h3",{className:"heading-donate-now",children:"You can Donate !"}),e.jsx("p",{className:"paragraph-donate-now",children:"If you've already donated someone, update your last donation date to pause notifications for 4 months."}),e.jsxs("div",{className:"person-requesting-container",children:[!n&&e.jsx(v,{}),n&&n.recipient_requesting.map((s,o)=>e.jsx(d,{props:s,email:n.email},o))]})]})]})})}export{w as default};
