import{r as o,u as x,j as e}from"./index-DeJVmANz.js";/* empty css                         *//* empty css                 *//* empty css                      *//* empty css                         */import{c as l}from"./prefilled-data-Cf8CPL9T.js";import{f as d}from"./apiFetching-D9uxTKnH.js";import{f as g}from"./currentDateTime-CphJXtmz.js";function S(){const[n,c]=o.useState({}),[r,m]=o.useState({country:null,reqDateTime:g(),pincode:null,landmark:null,patient_name:null}),s=x();o.useEffect(()=>{d("GET","api/v1/general/user").then(a=>{a||(localStorage.setItem("userLogged",!1),s("/login"))}).catch(()=>{localStorage.setItem("userLogged",!1),s("/login")})},[s]);const u=()=>{const a={};return Object.keys(r).map(t=>{t!=="reqDateTime"&&((r[t]===null||r[t]===""||r[t].trim()===null||r[t].trim()==="")&&(a[t]="It is a required feild"),t==="country"&&r[t]==="dummy"&&(a[t]="Choose Country"))}),Object.keys(a).length!==0?(c(()=>a),!1):!0},i=a=>{const{name:t,value:h}=a.target;m(f=>({...f,[t]:h}))},p=()=>{if(u())d("POST","api/v1/request/request-myself",r).then(a=>{a?(alert("Successfully listed, we are searching for donor."),s("/")):alert("Something went wrong. Please check the input")}).catch(a=>{alert("Something went wrong.")});else return!1};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"parent-container",children:[e.jsx("h2",{className:"donor-heading",children:"Find your donor"}),e.jsx("p",{className:"description-donor-details",children:"We are here to assist you in locating your donor. Please provide us with the following details."}),e.jsxs("div",{className:"take-deatils-container card",children:[e.jsxs("div",{className:"first-area",children:[e.jsxs("div",{className:"input-area-container border-container",children:[e.jsx("p",{className:"input-area-heading",children:"Location at which Blood Needed"}),e.jsxs("form",{className:"form-data",children:[e.jsxs("select",{className:"select-box",name:"country",id:"country",onChange:a=>i(a),selected:!0,children:[e.jsx("option",{selected:!0,disabled:!0,value:"dummy",children:"Country"}),Object.keys(l).map(a=>e.jsx("option",{value:l[a],children:a},a))]}),n.country&&e.jsx("p",{className:"invalid-data invalid-donor-form-data",children:n.country}),e.jsx("input",{type:"number",id:"pincode",name:"pincode",onChange:a=>i(a),placeholder:"Area Pincode",required:!0}),n.pincode&&e.jsx("p",{className:"invalid-data invalid-donor-form-data",children:n.pincode})]})]}),e.jsxs("div",{className:"input-area-container",children:[e.jsx("p",{className:"input-area-heading",children:" "}),e.jsxs("form",{className:"form-data",children:[e.jsx("input",{type:"text",id:"landmark",name:"landmark",onChange:a=>i(a),placeholder:"Landmark",required:!0}),n.landmark&&e.jsx("p",{className:"invalid-data invalid-donor-form-data",children:n.landmark}),e.jsx("input",{type:"text",name:"patient_name",id:"patient_name",onChange:a=>i(a),placeholder:"Recipient Name",required:!0}),n.patient_name&&e.jsx("p",{className:"invalid-data invalid-donor-form-data",children:n.patient_name})]})]})]}),e.jsx("div",{className:"submit-container",children:e.jsx("button",{className:"button-2",onClick:()=>p(),children:"Request"})})]})]})})}export{S as default};
