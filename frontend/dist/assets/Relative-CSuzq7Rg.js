import{r as o,u as v,j as a}from"./index-DeJVmANz.js";/* empty css                 *//* empty css                         *//* empty css                      *//* empty css                         */import{c as d,r as c,g as u,b as m}from"./prefilled-data-Cf8CPL9T.js";import{f as p}from"./apiFetching-D9uxTKnH.js";import{f as b}from"./currentDateTime-CphJXtmz.js";function E(){const[t,h]=o.useState({}),[r,g]=o.useState({country:null,reqDateTime:b(),pincode:null,landmark:null,patient_name:null,relation:null,age:null,gender:null,blood_group:null}),l=v();o.useEffect(()=>{p("GET","api/v1/general/user").then(e=>{e||(localStorage.setItem("userLogged",!1),l("/login"))}).catch(()=>{localStorage.setItem("userLogged",!1),l("/login")})},[l]);const x=()=>{const e={},s=["country","relation","gender","blood_group"];return Object.keys(r).map(n=>{n!=="reqDateTime"&&((r[n]===null||r[n]===""||r[n].trim()===null||r[n].trim()==="")&&(e[n]="It is a required feild"),s.includes(n)&&r[n]==="dummy"&&(e[n]="Select this feild"),n==="age"&&r[n]>=110&&(e[n]="Enter Correct Age."))}),Object.keys(e).length!==0?(h(()=>e),!1):!0},i=e=>{const{name:s,value:n}=e.target;g(f=>({...f,[s]:n}))},j=()=>{if(x())p("POST","api/v1/request/request-relative",r).then(e=>{e?(alert("Successfully listed, we are searching for donor."),l("/")):alert("Something went wrong. Please check the input")}).catch(e=>{alert("Something went wrong.")});else return!1};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"parent-container",children:[a.jsx("h2",{className:"donor-heading",children:"Find your donor"}),a.jsx("p",{className:"description-donor-details",children:"We are here to assist you in locating your donor. Please provide us with the following details."}),a.jsxs("div",{className:"take-deatils-container card",children:[a.jsxs("div",{className:"first-area",children:[a.jsxs("div",{className:"input-area-container border-container",children:[a.jsx("p",{className:"input-area-heading",children:"Location at which Blood Needed"}),a.jsxs("form",{className:"form-data",children:[a.jsxs("select",{className:"select-box",name:"country",id:"country",onChange:e=>i(e),selected:!0,children:[a.jsx("option",{selected:!0,disabled:!0,value:"dummy",children:"Country"}),Object.keys(d).map(e=>a.jsx("option",{value:d[e],children:e},e))]}),t.country&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.country}),a.jsx("input",{type:"text",id:"pincode",placeholder:"Area Pincode",name:"pincode",onChange:e=>i(e),required:!0}),t.pincode&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.pincode}),a.jsx("input",{type:"text",id:"landmark",name:"landmark",onChange:e=>i(e),placeholder:"Landmark",required:!0}),t.landmark&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.landmark}),a.jsxs("select",{className:"select-box",name:"relation",onChange:e=>i(e),id:"relation",selected:!0,children:[a.jsx("option",{selected:!0,disabled:!0,value:"dummy",children:"Relation with you"}),Object.keys(c).map(e=>a.jsx("option",{value:c[e],children:e},e))]}),t.relation&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.relation})]})]}),a.jsxs("div",{className:"input-area-container",children:[a.jsx("p",{className:"input-area-heading",children:"Receipent Details"}),a.jsxs("form",{className:"form-data",children:[a.jsx("input",{type:"text",id:"patient_name",onChange:e=>i(e),name:"patient_name",placeholder:"Recipient Name",required:!0}),t.patient_name&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.patient_name}),a.jsx("input",{type:"number",id:"age",onChange:e=>i(e),name:"age",placeholder:"Recipient Age",required:!0}),t.age&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.age}),a.jsxs("select",{className:"select-box",name:"gender",onChange:e=>i(e),id:"gender",selected:!0,children:[a.jsx("option",{selected:!0,disabled:!0,value:"dummy",children:"Gender"}),Object.keys(u).map(e=>a.jsx("option",{value:u[e],children:e},e))]}),t.gender&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.gender}),a.jsxs("select",{className:"select-box",name:"blood_group",onChange:e=>i(e),id:"blood_group",selected:!0,children:[a.jsx("option",{selected:!0,disabled:!0,value:"dummy",children:"Blood Group"}),Object.keys(m).map(e=>a.jsx("option",{value:m[e],children:e},e))]}),t.blood_group&&a.jsx("p",{className:"invalid-data invalid-donor-form-data",children:t.blood_group})]})]})]}),a.jsx("div",{className:"submit-container",children:a.jsx("button",{className:"button-2",onClick:()=>j(),children:"Request"})})]})]})})}export{E as default};
