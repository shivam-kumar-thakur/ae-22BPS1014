import{r as l,u as I,b as S,a as w,d as v,j as e,e as O,L as P}from"./index-DeJVmANz.js";import{P as B}from"./index-B0pkD8hY.js";/* empty css                         */import{b as C,g as D,w as E,c as q}from"./prefilled-data-Cf8CPL9T.js";import{f as T}from"./apiFetching-D9uxTKnH.js";function b({setDetailsCard:c}){const[t,u]=l.useState({last_donated:null}),[r,x]=l.useState({}),f=I(),p=S(a=>a.bloodFeatures.reg),[N,i]=l.useTransition(),d=w();l.useLayoutEffect(()=>{u(a=>({...a,...p}))},[]),l.useEffect(()=>{d(v({regData:t}));const a=new Date().toISOString().split("T")[0];document.getElementById("last_donated").setAttribute("max",a),document.getElementById("dob").setAttribute("max",a)},[t,d]);function o(a){const s={},j=["Blood Group","Gender","I can donate to ..","Country"];return["blood_group","gender","dob","prefered_donation","pincode","country"].forEach(g=>{!a[g]||a[g].trim()===""?s[g]="It is a required field":j.includes(a[g])&&(s[g]="It is a required feild")}),Object.keys(s).length===0?(d(v({regData:a})),!0):(i(()=>{x(()=>({...s}))}),!1)}const n=a=>{a.preventDefault();const{id:s,value:j}=a.target;u(y=>({...y,[s]:j}))};function m(){if(!o(t))return 0;T("POST","/api/v1/general/signup",p).then(a=>{a?(a.statuscode!==202&&f("/login"),d(O({email:p.user_email,set:!0})),f("/verify-email")):alert("Please enter valid details.")}).catch(()=>{alert("Enter Valid Details")})}const h=()=>{i(()=>{c(e.jsx(_,{setDetailsCard:c}))})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"login-container",id:"container1",children:[e.jsxs("div",{className:"logo",children:[e.jsx("img",{src:"image/logo-blue.png",className:"logo-image"}),e.jsx("span",{className:"logo-name",children:"BlueBeads"})]}),e.jsxs("form",{className:"form-data",children:[e.jsxs("div",{className:"two-input-div",children:[e.jsxs("select",{name:"blood-group",id:"blood_group",value:t&&t.blood_group,onChange:a=>n(a),required:!0,children:[e.jsx("option",{value:"Blood Group",disabled:!0,selected:!0,children:"Blood Group"}),Object.keys(C).map(a=>e.jsx("option",{value:C[a],children:a},a))]}),e.jsxs("select",{name:"gender",id:"gender",value:t&&t.gender,onChange:a=>n(a),required:!0,children:[e.jsx("option",{value:"Gender",disabled:!0,selected:!0,children:"Gender"}),Object.keys(D).map(a=>e.jsx("option",{value:D[a],children:a},a))]})]}),r.blood_group&&e.jsx("p",{className:"invalid-data",children:"Enter Blood Group."}),r.gender&&e.jsx("p",{className:"invalid-data",children:"Gender is required"}),e.jsx("p",{className:"dob-text",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"dob",value:t&&t.dob,onChange:a=>n(a),required:!0}),r.dob&&e.jsx("p",{className:"invalid-data",children:"Enter Birth Date."}),e.jsx("p",{className:"dob-text",children:"Last Donated"}),e.jsx("input",{type:"date",id:"last_donated",name:"last_donated",value:t&&t.last_donated,onChange:a=>n(a),required:!0}),r.last_donated&&e.jsx("p",{className:"invalid-data",children:r.last_donated}),e.jsxs("select",{name:"prefer-donation",id:"prefered_donation",value:t&&t.prefered_donation,onChange:a=>n(a),required:!0,children:[e.jsx("option",{selected:!0,disabled:!0,children:"I can donate to .."}),Object.keys(E).map(a=>e.jsx("option",{value:E[a],children:a},a))]}),r.prefered_donation&&e.jsx("p",{className:"invalid-data",children:r.prefered_donation}),e.jsxs("div",{className:"two-input-div",children:[e.jsxs("select",{name:"country",id:"country",value:t&&t.country,onChange:a=>n(a),required:!0,children:[e.jsx("option",{selected:!0,disabled:!0,children:"Country"}),Object.keys(q).map(a=>e.jsx("option",{value:q[a],children:a},a))]}),e.jsx("input",{type:"text",id:"pincode",placeholder:"Pincode",value:t&&t.pincode,onChange:a=>n(a),required:!0})]}),r.country&&e.jsx("p",{className:"invalid-data",children:"Choose Country"}),r.pincode&&e.jsx("p",{className:"invalid-data",children:"Enter pincode"}),e.jsxs("div",{className:"register-button-div",children:[e.jsx("a",{onClick:h,style:{color:"#940686",fontWeight:500,cursor:"grab"},children:"<< Back"}),e.jsx("button",{type:"button",className:"button-1",id:"save",onClick:()=>m(),children:"Register"})]})]})]})})}b.propTypes={setDetailsCard:B.func};const $=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));function _({setDetailsCard:c}){const[t,u]=l.useState({referal_code:null}),[r,x]=l.useState({}),f=w(),p=S(o=>o.bloodFeatures.reg);l.useLayoutEffect(()=>{u(o=>({...o,...p}))},[]);function N(o){const n={},m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,h=/^[0-9]{10}$/;return["username","password","user_email","phone_number"].forEach(s=>{(!o[s]||o[s].trim()==="")&&(n[s]="It is a required field"),s==="user_email"&&!m.test(o[s])&&(n[s]="Enter a valid Email address"),s==="phone_number"&&!h.test(o[s])&&(n[s]="Enter a valid Phone Number")}),Object.keys(n).length===0?(f(v({regData:o})),!0):(x(n),!1)}const i=o=>{o.preventDefault();const{id:n,value:m}=o.target;u(h=>({...h,[n]:m}))},d=()=>{N(t)&&c(e.jsx(b,{setDetailsCard:c}))};return e.jsxs("div",{className:"login-container",id:"container1",children:[e.jsxs("div",{className:"logo",children:[e.jsx("img",{src:"image/logo-blue.png",className:"logo-image"}),e.jsx("span",{className:"logo-name",children:"BlueBeads"})]}),e.jsxs("form",{className:"form-data",children:[e.jsx("input",{type:"text",id:"username",placeholder:"Name",value:t.username||"",onChange:i,required:!0}),r.username&&e.jsx("p",{className:"invalid-data",children:r.username}),e.jsx("input",{type:"email",id:"user_email",placeholder:"Enter Your E-mail Id",value:t.user_email||"",onChange:i,required:!0}),r.user_email&&e.jsx("p",{className:"invalid-data",children:r.user_email}),e.jsx("input",{type:"password",id:"password",placeholder:"Enter Your Password",value:t.password||"",onChange:i,required:!0}),r.password&&e.jsx("p",{className:"invalid-data",children:r.password}),e.jsx("input",{type:"tel",id:"phone_number",placeholder:"Enter Your Phone Number",value:t.phone_number||"",onChange:i,required:!0}),r.phone_number&&e.jsx("p",{className:"invalid-data",children:r.phone_number}),e.jsx("p",{className:"number-format-specify",children:"Dont add +91, +1 etc"}),e.jsx("input",{type:"text",id:"referal_code",placeholder:"Referral Code",value:t.referal_code||"",onChange:i}),r.referal_code&&e.jsx("p",{className:"invalid-data",children:r.referal_code}),e.jsxs("div",{className:"register-button-div",children:[e.jsx(P,{to:"/help",children:e.jsx("p",{style:{color:"#940686",fontWeight:500},children:"Help"})}),e.jsx("button",{type:"button",className:"button-1",id:"save",onClick:()=>d(),children:"Save"})]})]})]})}_.propTypes={setDetailsCard:B.func.isRequired};const Y=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_ as P,$ as S,Y as a};
